local queueteleport = queue_on_teleport or (syn and syn.queue_on_teleport) or (fluxus and fluxus.queue_on_teleport)

-- Auto reload script after rejoin
if queueteleport then
	queueteleport([[
        loadstring(game:HttpGet("https://raw.githubusercontent.com/tawlavegas-jpg/wdwdwdwd/refs/heads/main/tththth"))()
	]])
	print("‚úÖ Auto-reload enabled")
else
	warn("‚ö†Ô∏è queue_on_teleport not supported - script will not auto-reload")
end


-----------------------------------------------------
-- MAIN SERVICES
-----------------------------------------------------
local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

local PlaceId = game.PlaceId
local JobId = game.JobId

local targetRole = "Kamado"


-----------------------------------------------------
-- REJOIN FUNCTION
-----------------------------------------------------
local function rejoin()
    print("üîÑ Rejoining...")
    task.wait(1)

    if #Players:GetPlayers() <= 1 then
        player:Kick("\nRejoining...")
        task.wait()
        TeleportService:Teleport(PlaceId, player)
    else
        TeleportService:TeleportToPlaceInstance(PlaceId, JobId, player)
    end
end


-----------------------------------------------------
-- WAIT UNTIL UI READY
-----------------------------------------------------
print("‚è≥ Waiting for LoadingScreen to disappear...")
repeat task.wait(0.5) until not PlayerGui:FindFirstChild("LoadingScreen")
print("‚úÖ LoadingScreen gone!")


-- Load interface tree
local Interface = PlayerGui:WaitForChild("Interface")
local Customization = Interface:WaitForChild("Customization")
local GuiFamily = Customization:WaitForChild("Family")
local SpinsText = GuiFamily:WaitForChild("Spins")

-- ‡πÅ‡∏Å‡πâ‡∏à‡∏∏‡∏î‡∏û‡∏±‡∏á ‚ö† ‚Äî ‡∏£‡∏≠ Family UI ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏£‡∏¥‡∏á‡∏ï‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà
print("‚è≥ Waiting for Family UI to update...")
repeat task.wait() until GuiFamily.Text ~= "" and not string.find(GuiFamily.Text, "Loading") 
task.wait(1)
print("‚úÖ Family UI updated!")


-----------------------------------------------------
-- REMOTE PAYLOADS
-----------------------------------------------------
local rerollEyes = {"Character", "Customization", "Eyes", workspace}
local saveEyes   = {"Character", "Customization", "Eyes", 5}


-----------------------------------------------------
-- FUNCTIONS
-----------------------------------------------------

-- ‡∏≠‡πà‡∏≤‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô chances
local function getChances()
    local text = SpinsText.Text
    local num = tonumber(string.match(text, "%d+"))
    return num or 0
end


-- ‡∏≠‡πà‡∏≤‡∏ô LastName ‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å server (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà GUI)
local function getRealLastName()
    -- ‡πÄ‡∏Å‡∏°‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ Remote Sync ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤ LastName
    local result = game:GetService("ReplicatedStorage")
        :WaitForChild("Remotes")
        :WaitForChild("Sync")
        :InvokeServer("Character","Customization","LastName")

    return tostring(result or "")
end



-----------------------------------------------------
-- MAIN AUTO ROLE FUNCTION
-----------------------------------------------------
_G.autoRole = true

local function autoRole()
    local round = 0
    local foundRole = false

    while _G.autoRole do
        local chances = getChances()

        if chances <= 0 then
            print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
            print("‚ö†Ô∏è ‡∏´‡∏°‡∏î Chances ‡πÅ‡∏•‡πâ‡∏ß!")
            print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
            break
        end

        round += 1
        print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
        print("üîÑ ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà " .. round .. " (‡πÄ‡∏´‡∏•‡∏∑‡∏≠ " .. chances .. " Chances)")
        print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")

        task.wait(0.1)

        -------------------------------------------------
        -- ‡πÄ‡∏ä‡πá‡∏Ñ‡∏à‡∏≤‡∏Å Server ‡∏à‡∏£‡∏¥‡∏á (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà GUI)
        -------------------------------------------------
        local lastName = getRealLastName()

        if lastName == targetRole then
            print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
            print("‚úÖ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡πÑ‡∏î‡πâ " .. targetRole .. " ‡πÅ‡∏•‡πâ‡∏ß!")
            print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")

            ReplicatedStorage.Remotes.Sync:InvokeServer(unpack(saveEyes))
            foundRole = true
            break
        end


        -------------------------------------------------
        -- ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‚Üí REROLL 50 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
        -------------------------------------------------
        print("  ‚öôÔ∏è ‡∏Å‡∏≥‡∏•‡∏±‡∏á Reroll 50 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á...")

        for i = 1, 50 do
            if not _G.autoRole then break end

            ReplicatedStorage.Remotes.Sync:InvokeServer(unpack(rerollEyes))
            task.wait(0.05)

            if i % 10 == 0 then
                print("  ‚Ü≥ " .. i .. "/50")
            end
        end

        task.wait(1)

        -- Refresh ‡∏Ñ‡πà‡∏≤ LastName
        ReplicatedStorage.Remotes.Sync:InvokeServer("Character","Customization","LastName")
        task.wait(0.5)
    end


    -------------------------------------------------
    -- AFTER LOOP
    -------------------------------------------------
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")

    if not foundRole then
        print("üò¢ ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ " .. targetRole .. " - ‡∏Å‡∏≥‡∏•‡∏±‡∏á Rejoin...")
        rejoin()
    else
        print("üéâ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå! ‡πÑ‡∏î‡πâ " .. targetRole .. " ‡πÅ‡∏•‡πâ‡∏ß")
        print("üõë ‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô")
    end

    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
end


-----------------------------------------------------
-- START AUTO ROLE
-----------------------------------------------------
autoRole()
